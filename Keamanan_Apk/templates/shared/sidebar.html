{# templates/shared/sidebar.html #}

<div class="sidebar" id="main-sidebar">
    <button class="sidebar-toggle-btn" id="sidebar-toggle">
        <i class="fas fa-bars"></i>
    </button>
    <ul class="sidebar-nav">
        <div id="sidebar-active-indicator"></div> {# Indikator aktif sidebar #}
        {# Link di sidebar selalu muncul ketika sidebar aktif #}
        <li class="sidebar-nav-item">
            <a class="sidebar-nav-link" data-target-id="dashboard-page" href="{{ url_for('main.dashboard') }}">
                <i class="fas fa-tachometer-alt icon"></i> <span class="text">Dashboard</span>
            </a>
        </li>
        {# Admin Panel hanya untuk admin #}
        {% if current_user.role == 'admin' %}
        <li class="sidebar-nav-item">
            <a class="sidebar-nav-link" data-target-id="admin-panel-page" href="{{ url_for('main.admin_panel') }}">
                <i class="fas fa-user-shield icon"></i> <span class="text">Admin Panel</span>
            </a>
        </li>
        {% endif %}
        {# Link Services, About Us, FAQ #}
        <li class="sidebar-nav-item">
            <a class="sidebar-nav-link" data-target-id="services-page" href="{{ url_for('main.services') }}">
                <i class="fas fa-cogs icon"></i> <span class="text">Services</span>
            </a>
        </li>
        <li class="sidebar-nav-item">
            <a class="sidebar-nav-link" data-target-id="about-page" href="{{ url_for('main.about') }}">
                <i class="fas fa-info-circle icon"></i> <span class="text">About Us</span>
            </a>
        </li>
        <li class="sidebar-nav-item">
            <a class="sidebar-nav-link" data-target-id="faq-page" href="{{ url_for('main.home') }}#faq-section">
                <i class="fas fa-question-circle icon"></i> <span class="text">FAQ</span>
            </a>
        </li>
        {# Link Logout #}
        <li class="sidebar-nav-item">
            <a class="sidebar-nav-link" data-target-id="logout-action" href="{{ url_for('main.logout') }}">
                <i class="fas fa-sign-out-alt icon"></i> <span class="text">Logout ({{ current_user.username }})</span>
            </a>
        </li>
    </ul>
</div>

<aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h4 class="app-logo">SecureSync</h4>
        <button id="sidebar-toggle" class="sidebar-toggle-btn">
            <i class="fas fa-bars"></i>
        </button>
    </div>
    <nav class="sidebar-nav">
      <div id="sidebar-active-indicator"></div>
        <ul class="list-unstyled">
            <li class="nav-item">
                <a href="{{ url_for('main.dashboard') }}" class="nav-link {% if request.endpoint == 'main.dashboard' %}active{% endif %}">
                    <i class="fas fa-fw fa-columns"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ url_for('main.create_todo') }}" class="nav-link {% if request.endpoint == 'main.create_todo' %}active{% endif %}">
                    <i class="fas fa-fw fa-plus-circle"></i>
                    <span>Buat To-Do Baru</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ url_for('main.my_todo_lists') }}" class="nav-link {% if request.endpoint == 'main.my_todo_lists' %}active{% endif %}">
                    <i class="fas fa-fw fa-list-check"></i>
                    <span>To-Do List Saya</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ url_for('main.shared_todo_lists') }}" class="nav-link {% if request.endpoint == 'main.shared_todo_lists' %}active{% endif %}">
                    <i class="fas fa-fw fa-users"></i>
                    <span>Dibagikan ke Saya</span>
                </a>
            </li>
            {% if current_user.role == 'admin' %}
            <li class="nav-item">
                <a href="{{ url_for('main.admin_panel') }}" class="nav-link {% if request.endpoint == 'main.admin_panel' %}active{% endif %}">
                    <i class="fas fa-fw fa-user-shield"></i>
                    <span>Admin Panel</span>
                </a>
            </li>
            {% endif %}
            <li class="nav-item">
                <a href="{{ url_for('main.logout') }}" class="nav-link">
                    <i class="fas fa-fw fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </nav>
    <div class="sidebar-footer">
        <p>User: {{ current_user.username }}</p>
        <p class="user-id">ID: {{ current_user.id }}</p>
    </div>
</aside>

